<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Course List</title>
</head>
<body>

<h1>All Courses</h1>

<a th:href="@{/courses/new}">Add New Course</a>

<hr>

<form method="get" th:action="@{/courses}">
    <label>Title contains:</label>
    <input type="text" name="title" th:value="${titleFilter}" />

    <label>Semester:</label>
    <input type="text" name="semester" th:value="${semesterFilter}" />

    <label>Sort by:</label>
    <select name="sortField">
        <option value="title" th:selected="${sortField == 'title'}">Title</option>
        <option value="credits" th:selected="${sortField == 'credits'}">Credits</option>
        <option value="semester" th:selected="${sortField == 'semester'}">Semester</option>
    </select>

    <select name="sortDir">
        <option value="asc" th:selected="${sortDir == 'asc'}">Ascending</option>
        <option value="desc" th:selected="${sortDir == 'desc'}">Descending</option>
    </select>

    <button type="submit">Apply</button>
</form>

<hr>

<table border="1" cellpadding="6" cellspacing="0">
    <thead>
    <tr>
        <th><a th:href="@{/courses(sortField='id', sortDir=${reverseSortDir})}">ID</a></th>
        <th><a th:href="@{/courses(sortField='title', sortDir=${reverseSortDir})}">Title</a></th>
        <th><a th:href="@{/courses(sortField='credits', sortDir=${reverseSortDir})}">Credits</a></th>
        <th><a th:href="@{/courses(sortField='semester', sortDir=${reverseSortDir})}">Semester</a></th>
        <th>Department</th>
        <th>Room</th>
        <th>Actions</th>
    </tr>
    </thead>

    <tbody>
    <tr th:each="course : ${courses}">
        <td th:text="${course.id}"></td>
        <td th:text="${course.title}"></td>
        <td th:text="${course.credits}"></td>
        <td th:text="${course.semester}"></td>
        <td th:text="${course.department != null ? course.department.name : 'No dept'}"></td>
        <td th:text="${course.room != null ? course.room.number : 'No room'}"></td>

        <td>
            <a th:href="@{'/courses/' + ${course.id}}">Details</a> |
            <a th:href="@{'/courses/' + ${course.id} + '/edit'}">Edit</a> |
            <form th:action="@{'/courses/' + ${course.id} + '/delete'}" method="post" style="display:inline;">
                <button type="submit">Delete</button>
            </form>
        </td>
    </tr>
    </tbody>
</table>

</body>
</html>
